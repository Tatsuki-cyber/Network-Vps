name: Tailscale Exit Node VPS
on: 
  workflow_dispatch:

jobs:
  exit-node:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Connect & Advertise Exit Node
        uses: tailscale/github-action@v3
        with:
          authkey: ${{ secrets.TAILSCALE_AUTHKEY }}
          args: --advertise-exit-node # This is the critical line

      - name: Network Optimization
        run: |
          # Optimize for max throughput
          sudo ethtool -K eth0 rx-udp-gro-forwarding on rx-gro-list off
          echo "Exit Node is running. Check your Tailscale app on Windows."
          sleep 21600 # 6 hours of uptime
